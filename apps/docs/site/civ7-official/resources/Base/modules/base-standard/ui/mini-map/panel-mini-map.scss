@use 'sass:color';
@use '../../../core/ui/utilities/utility-layout' as *;
@use '../../../core/ui/themes/default/theme';
@use '../../../core/ui/themes/default/animations';

.mini-map-container {
	align-self: flex-end;
	display: flex;
	flex-direction: column;
}

.mini-map__main {
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align-items: center;
	height: pixels(204);
	width: pixels(380);
	border-image-source: url('fs://game/hud_mini_box.png');
	border-image-slice: 12 fill;
	border-image-width: pixels(12);
	border-width: pixels(12);

	transition-property: height;
	transition-timing-function: animations.$cubicInOut;
	transform-origin: bottom;
	transition-duration: .25s;
}

.mini-map__main-minimized {
	height: pixels(30);
}

.mini-map__image {
	position: absolute;
	left: pixels(15);
	right: pixels(15);
	top: pixels(15);
	bottom: pixels(15);
	background-size: 100% 100%;
	transition-property: opacity;
	transition-duration: .25s;
	transition-timing-function: animations.$cubicInOut;
	opacity: 1;
	overflow: hidden;
	pointer-events: auto;
	background-image: url("live:/minimap");
}

.mini-map__button-row {
	position: absolute;
	top: pixels(-8);
	width: 100%;
	height: pixels(32);
	display: flex;
	flex-direction: row;
	justify-content: center;
	align-items: center;
	margin-top: pixels(-8);
}

.mini-map__lens-button {
	position: relative;
	width: pixels(48);
	height: pixels(48);
	pointer-events: auto;

	@media (experience: mobile) {
		width: pixels(58);
		height: pixels(58);
	}

	transition: transform .25s cubic-bezier(0.215, 0.61, 0.355, 1);

	&:hover {
		transform: scale(1.3);
	}
}

@mixin absolute-inset-img($url, $value) {
	position: absolute;
	top: $value;
	left: $value;
	right: $value;
	bottom: $value;
	background-image: url($url);
	background-repeat: no-repeat;
	background-size: contain;
}

.mini-map__lens-button__icon {
	@include absolute-inset-img('fs://game/action_lookout.png', pixels(7));

}

.mini-map__lens-button__bg {
	@include absolute-inset-img('fs://game/hud_mini_lens_btn.png', pixels(-8));
}

.mini-map__lens-panel {
	pointer-events: auto;
	width: pixels(356);
	border-top-left-radius: pixels(6);
	border-top-right-radius: pixels(6);
	background: linear-gradient(to bottom, theme.color('primary-4', .9), theme.color('primary-5', .8))
}

.mini-map__lens-panel-container {
	transition-property: transform;
	transition-timing-function: animations.$cubicInOut;
	transform-origin: bottom;
	transition-duration: .25s;
}

.mini-map__chat-button {
	pointer-events: auto;

	transition: transform .25s cubic-bezier(0.215, 0.61, 0.355, 1);

	&:hover {
		transform: scale(1.3);
	}
}

.mini-map__chat-button__icon {
	@include absolute-inset-img('fs://game/action_chat.png', pixels(7));
}

.mini-map__chat-button__bg {
	@include absolute-inset-img('fs://game/hud_mini_lens_btn.png', pixels(-8));
}

.mini-map__radial-button {
	@media (experience: mobile) {
		width: pixels(58);
		height: pixels(58);
	}
}

.mini-map__radial-button__icon {
	@include absolute-inset-img('fs://game/action_radial.png', pixels(7));
	transform: translate(0, pixels(1));
}

.mini-map__radial-button__bg {
	@include absolute-inset-img('fs://game/hud_mini_lens_btn.png', pixels(-8));
}

.mini-map__chat-panel {
	height: 53vh;
	width: pixels(364);

	@media (max-height: pixels(860)) {
		height: 49vh;
	}

	@media (max-height: pixels(768)) {
		height: 45vh;
		width: pixels(436);
	}

	transition-property: transform;
	transition-timing-function: animations.$cubicInOut;
	transform-origin: bottom;
	transition-duration: .25s;
}