<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Icon Reference</title>
	<link rel="stylesheet" href="fs://game/core/ui/themes/default/fonts.css">
	<link rel="stylesheet" href="fs://game/core/ui/themes/default/default.css">
	<link rel="stylesheet" href="reference.css">
	<script src="fs://game/game/cohtml.js"></script>
	<script src="fs://game/core/ui/themes/default/global-scaling.js"></script>
	<script src="fs://game/game/component-support.js"></script>

	<style>
		.icon {
			width: 32px;
			height: 32px;
			margin-bottom: 5px;
			margin-top: 5px;
			margin-left: 5px;
			margin-right: 5px;
			pointer-events: auto;
		}

		#tooltip-root-content>div {
			display: flex;
			flex-direction: column;
		}
	</style>
</head>

<body class="text-accent-2">
	<div class="panel" style="width:80%;height:80%">
		<fxs-scrollable class="panel-content">
			<div id="icon-parent" class="flow-column" style="display: flex;margin:5px;padding:5px;">

			</div>
		</fxs-scrollable>
	</div>
	<div id="tooltip-root"
		 class="new-tooltip--root absolute max-w-96 p-3 img-tooltip-border img-tooltip-bg pointer-events-none"
		 style="visibility:hidden; z-index: 99;">
		<div id="tooltip-root-content" class="relative font-body"></div>
	</div>

	<script type="text/javascript">

		function populateIcons(context) {

			const group = document.createElement('div')
			group.classList.add('flow-column')

			const label = document.createElement('div')
			label.classList.add('font-body-base')
			label.innerHTML = context

			const iconGroup = document.createElement('div')
			iconGroup.classList.add('flow-row')
			iconGroup.style.flexWrap = 'wrap'

			const icons = UI.getIcons(context)
			for (const icon of icons) {
				const el = document.createElement('fxs-icon')
				el.classList.add('icon')
				el.setAttribute('data-icon-id', icon.id)
				el.setAttribute('data-icon-context', context)

				const alias = UI.getIconAlias(icon.id, context)
				if (alias) {
					const tt = `${icon.id} [n] (${alias.id} - ${alias.context})`
					el.setAttribute('data-tooltip-content', tt)
				}
				else {
					el.setAttribute('data-tooltip-content', icon.id)
				}

				iconGroup.appendChild(el)
			}
			group.appendChild(label)
			group.appendChild(iconGroup)
			return group
		}

		Loading.runWhenLoaded(() => {
			const parent = document.getElementById('icon-parent')
			if (parent) {
				const frag = document.createDocumentFragment()

				let contexts = UI.getIconContexts()
				contexts.sort((a, b) => { return a.context < b.context })
				for (const c of contexts) {
					frag.appendChild(populateIcons(c.context))
				}
				parent.appendChild(frag)
			}

			UI.notifyUIReady()
		});
	</script>
</body>

</html>