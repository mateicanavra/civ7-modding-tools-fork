@use '../utilities/utility-layout' as *;
@use '../utilities/utility-text' as *;
@use '../themes/default/baseColors';
@use '../themes/default/theme';

.new-tooltip--root {
	transform: translateX(pixels(0));
}

.tooltip {
	padding-top: pixels(24);
	padding-left: pixels(24);
	padding-bottom: pixels(6);
	padding-right: pixels(6);

	position: relative;
	margin: auto;
	font-size: pixels-font(17);
	line-height: pixels(24);
	display: flex;
	flex-direction: column;
	transform: translateX(pixels(0));

	&.plot-tooltip {
		--padding-top-bottom: #{pixels(12)};
		--padding-left-right: #{pixels(17)};

		.tooltip__content {
			padding-top: var(--padding-top-bottom);
			padding-bottom: var(--padding-top-bottom);
			padding-left: var(--padding-left-right);
			padding-right: var(--padding-left-right);
		}

		&.plot-tooltip--local-selected-unit {
			margin-left: pixels(72);

			&.right {
				margin-left: auto;
				margin-right: pixels(72);
			}
		}
	}

	&.above {
		.tooltip__progress {
			top: initial;
			bottom: pixels(-42);
			transform: rotate(-90deg);
		}

		.tooltip-arrow {
			top: inherit;
			bottom: pixels(13);
			transform: scaleY(-1);
		}

		.arrow-shadow {
			top: inherit;
			bottom: pixels(-12);
		}

		.tooltip__content {
			animation-name: tooltip-reveal-above;
		}
	}

	&.right {
		.tooltip__progress {
			left: initial;
			right: pixels(-36);
			transform: scaleX(-1);
		}

		.tooltip-arrow {
			left: inherit;
			right: pixels(12);
			transform: scaleX(-1);
		}

		.arrow-shadow {
			left: inherit;
			right: pixels(-10);
		}

		.tooltip__content {
			animation-name: tooltip-reveal-right;
		}

		&.above {
			.tooltip__progress {
				transform: rotate(90deg) scaleX(-1);
			}

			.tooltip-arrow {
				transform: scaleX(-1) scaleY(-1);
			}

			.tooltip__content {
				animation-name: tooltip-reveal-above-right;
			}
		}
	}

	.tooltip-title {
		display: flex;
		align-items: center;
		color: baseColors.$third-color;
		font-weight: bold;
		padding-left: pixels(13);
		padding-right: pixels(14);
	}

	.tooltip-value {
		display: flex;
		align-items: center;
		color: baseColors.$third-dark-color;
		font-weight: normal;
		padding-right: pixels(13);
		white-space: pre-wrap;
	}

	.tooltip-text {
		max-width: pixels(384);
	}
}

.tooltip__content {
	position: relative;
	margin: auto;
	padding-top: pixels(12);
	padding-bottom: pixels(12);
	padding-left: pixels(17);
	padding-right: pixels(17);
	height: auto;
	width: auto;
	display: flex;
	flex-direction: column;
	animation-name: tooltip-reveal;
	animation-duration: .25s;
	animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
	animation-fill-mode: both;
}

.tooltip-debug {
	white-space: pre-wrap;
}

.tooltip__progress {
	position: absolute;
	top: pixels(-16);
	left: pixels(-22);
	width: pixels(60);
	height: pixels(60);
	background-image: radial-gradient(circle at 50% 50%, transparent pixels(0), transparent pixels(20), rgb(10, 2, 13)pixels(20), rgb(10, 2, 13)pixels(26), transparent pixels(26));
	mask-image: linear-gradient(to bottom, transparent 0%, transparent 50%, rgba(255, 255, 255, 1)50%, rgba(255, 255, 255, 1)100%);
	mask-size: 50% 100%;
	mask-position: 100% 50%;
	mask-repeat: no-repeat;
	transform-origin: 50%;
	opacity: 0;
	animation-name: tooltip-progress-show, tooltip-progress-hide;
	animation-duration: 0.25s, 0s;
	animation-timing-function: linear;
	animation-fill-mode: forwards;
}

.tooltip__progress-bar {
	position: relative;
	width: 100%;
	height: 100%;
	transform-origin: 50% 50%;
	transform: rotate(90deg);
	background-image: radial-gradient(circle at 50% 50%, transparent pixels(0), transparent pixels(20), theme.$default-color-secondary pixels(20), theme.$default-color-secondary pixels(26), transparent pixels(26));
	mask-image: linear-gradient(to bottom, transparent 0%, transparent 50%, rgba(255, 255, 255, 1)50%, rgba(255, 255, 255, 1)100%);
	mask-size: 50% 100%;
	mask-position: 100% 50%;
	mask-repeat: no-repeat;
	animation-name: tooltip-progress;
	animation-delay: 0s;
	animation-timing-function: linear;
	animation-fill-mode: both;
}

@keyframes tooltip-fade {
	0% {
		border-width: 0;
	}

	100% {
		border-width: 0;
	}
}

@keyframes tooltip-progress-show {
	0% {
		opacity: 0;
	}

	100% {
		opacity: 1;
	}
}

@keyframes tooltip-progress {
	100% {
		transform: rotate(0deg);
	}
}

@keyframes tooltip-progress-hide {
	0% {
		opacity: 1;
	}

	100% {
		opacity: 0;
	}
}

@keyframes tooltip-reveal {
	0% {
		opacity: 0;
		transform: translateX(pixels(-6)) translateY(pixels(-12));
	}

	100% {
		opacity: 1;
		transform: translateX(pixels(0)) translateY(pixels(0));
	}
}

@keyframes tooltip-reveal-above {
	0% {
		opacity: 0;
		transform: translateX(pixels(-6)) translateY(pixels(12));
	}

	100% {
		opacity: 1;
		transform: translateX(pixels(0)) translateY(pixels(0));
	}
}

@keyframes tooltip-reveal-right {
	0% {
		opacity: 0;
		transform: translateX(pixels(6)) translateY(pixels(-12));
	}

	100% {
		opacity: 1;
		transform: translateX(pixels(0)) translateY(pixels(0));
	}
}

@keyframes tooltip-reveal-above-right {
	0% {
		opacity: 0;
		transform: translateX(pixels(6)) translateY(pixels(12));
	}

	100% {
		opacity: 1;
		transform: translateX(pixels(0)) translateY(pixels(0));
	}
}

.plot-tooltip__settler-tooltip {
	font-size: pixels-font(14);
	text-align: center;
	line-height: 1.175em;

	&.blocked-location {
		padding: pixels(8);
		background-color: baseColors.$low-health-color;
		color: baseColors.$base-lighter-color;
	}

	&.okay-location {
		padding: pixels(8);
		background-color: baseColors.$med-health-color;
		color: baseColors.$base-color;
	}
}

.plot-tooltip__line {
	font-size: pixels-font(17);
	text-align: center;
	line-height: pixels(18);
}

.plot-tooltip__resourcesFlex {
	position: relative;
	--yield-width: #{pixels(30)};
	display: flex;
	flex-wrap: wrap;
	justify-content: center;
	width: 100%;
	height: auto;
	padding-top: #{pixels(2)};

	&.resourcesFlex--double-digits {
		--yield-width: #{pixels(36)};
	}

	&.resourcesFlex--triple-digits {
		--yield-width: #{pixels(42)};
	}
}

.plot-tooltip__district-container {
	font-size: pixels-font(12);
	--padding-top-bottom: #{pixels(4)};
	display: flex;
	flex-direction: column;
	margin-left: calc(-1 * var(--padding-left-right));
	margin-right: calc(-1 * var(--padding-left-right));
	padding-top: var(--padding-top-bottom);
	padding-bottom: var(--padding-top-bottom);
	padding-left: var(--padding-left-right);
	padding-right: var(--padding-left-right);
	background-color: theme.color('healthbar-low-bg');

	.plot-tooltip__district-health {
		display: flex;
		justify-content: center;
		align-items: center;
	}

	.plot-tooltip__health-caption {
		font-size: pixels-font(13);
		color: theme.color('healthbar-medium');
		margin-right: pixels(8);
	}

	.plot-tooltip__health-progress-bar {
		height: pixels(8);
		flex: 1 1 auto;
		border-color: theme.color('healthbar-medium');
		border-style: solid;
		border-width: pixels(1);

		.bg {
			height: 100%;
			padding: pixels(0);
		}

		.bar-bg {
			height: 100%;
		}
	}
}

.tooltipIndividualYieldFlex {
	display: flex;
	justify-content: center;
	width: 25%;
	height: pixels(48);
	margin-left: pixels(10);
	margin-right: pixels(10);
}

.plot-tooltip__IndividualYieldFlex {
	position: relative;
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align-items: center;
	width: var(--yield-width);
}

.plot-tooltip__IndividualYieldIcons-Shadow {
	position: relative;
	transform: translate(pixels(-2), pixels(2));
	width: pixels(24);
	height: pixels(24);
	background-size: contain;
	background-repeat: no-repeat;
	fxs-background-image-tint: black;
}

.plot-tooltip__IndividualYieldIcons {
	position: relative;
	transform: translate(pixels(2), pixels(-2));
	width: 100%;
	height: 100%;
	background-size: contain;
	background-repeat: no-repeat;
}

.plot-tooltip__IndividualYieldValues {
	position: relative;
	width: auto;
	text-align: center;
	font-size: pixels-font(17);
	line-height: pixels(24);
	font-weight: 700;
}

.plot-tooltip__TitleLineFlex {
	display: flex;
	flex-direction: row;
	justify-content: center;
	align-items: center;
	align-self: center;
	margin-left: pixels(-24);
	margin-right: pixels(-24);
	flex: 1 1 auto;
}

.plot-tooltip__TitleLineleft {
	height: pixels(2);
	flex: 1 1 auto;
	min-width: pixels(24);
	margin-left: pixels(-24);
	background-image: linear-gradient(to left, theme.color('primary-1'), theme.color('primary-1', 0));
}

.plot-tooltip__TitleLineRight {
	height: pixels(2);
	flex: 1 1 auto;
	min-width: pixels(24);
	margin-right: pixels(-24);
	background-image: linear-gradient(to right, theme.color('primary-1'), theme.color('primary-1', 0));
}

.plot-tooltip__Divider {
	height: pixels(2);
	flex: 1 1 auto;
	margin-left: pixels(-24);
	margin-right: pixels(-24);
	background-image: linear-gradient(90deg, rgba(141, 151, 166, 0) 0%, #8D97A6FF 50%, rgba(141, 151, 166, 0) 100%);
}

.plot-tooltip__ImprovementName {
	display: flex;
	flex-direction: row;
	align-items: center;
	position: relative;
	align-self: center;
	text-align: center;
	font-size: pixels-font(17);
	letter-spacing: pixels(2);
	padding-left: pixels(12);
	padding-right: pixels(12);
	line-height: pixels(24);
	max-width: pixels(192);
}

.plot-tooltip__Improvements-Resources-Copies-Flex {
	width: 50%;
	height: pixels(20);
	display: flex;
	justify-content: space-between;
	transform: translate(50%, 0);
}

.plot-tooltip__Improvements-Resources-Icons {
	width: 40%;
	height: pixels(20);
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center center;
}

.plot-tooltip__constructible-yield-flex {
	width: 100%;
	height: auto;
	display: flex;
	flex-direction: column;
	justify-content: center;
}

.plot-tooltip__constructible-yield-total-flex {
	width: 50%;
	height: pixels(20);
	display: flex;
	justify-content: space-between;
	transform: translate(50%, 0);
}

.plot-tooltip__constructible-yield-total-icon {
	width: 40%;
	height: pixels(20);
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center center;
}

.plot-tooltip__constructible-breakdown-line-flex {
	width: 80%;
	height: pixels(20);
	display: flex;
}

.plot-tooltip__constructible-yield-line-icon {
	width: pixels(20);
	height: pixels(20);
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center center;
}

.plot-tooltip__trade-route-info,
.plot-tooltip__debug-title-text,
.plot-tooltip__owner-leader-text,
.plot-tooltip__owner-relationship-text {
	font-size: pixels-font(17);
	text-align: center;
	line-height: pixels(24);
}

.plot-tooltip__resource-label {
	font-size: pixels-font(17);
	line-height: pixels(24);
}

.plot-tooltip__owner-civ-text {
	font-size: pixels-font(15);
	text-align: center;
	line-height: pixels(18);
	margin-top: pixels(1);
}


.plot-tooltip__unitInfo,
.plot-tooltip__Civ-Info,
.plot-tooltip__Unit-Relationship-Info,
.plot-tooltip__coordinate-text,
.plot-tooltip__coordinate-text,
.plot-tooltip__building-status {
	font-size: pixels-font(15);
	text-align: center;
	line-height: pixels(18);
}

.plot-tooltip__resource-label_description {
	font-size: pixels-font(15);
	line-height: pixels(18);
}

.plot-tooltip__resource-container {
	position: relative;
	width: 100%;
	display: flex;
	flex-direction: row;
	justify-content: flex-start;
	align-content: center;
}

.plot-tooltip__resource-details {
	position: relative;
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align-items: flex-start;
	max-width: pixels(144);
}

.plot-tooltip__large-resource-icon {
	width: pixels(48);
	height: pixels(48);
	margin-right: pixels(12);
	background-size: cover;
	background-position: center center;
	background-repeat: no-repeat;
}

.plot-tooltip__debug-flexbox {
	width: 100%;
	height: auto;
	display: flex;
	flex-direction: column;
	background-color: rgba(150, 57, 57, .35);
}

.plot-tooltip__plot-effect-text {
	text-align: center;
}

.relationship-tooltip__relationship-title {
	font-size: pixels-font(12);
}

.relationship-tooltip__agenda-title {
	align-self: center;
	font-size: pixels-font(16);
	color: baseColors.$med-health-color;
}

.relationship-tooltip__agenda-name {
	font-size: pixels-font(20);
	align-self: center;
}

.relationship-tooltip__agenda-description {
	font-size: pixels-font(16);
}

.tech-civic-tooltip {
	&.tooltip {
		.tooltip__content {
			width: pixels(420);
		}
	}

	.tech-civic-tooltip__header-container {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	.tech-civic-tooltip__unlocks-container {
		display: flex;
		flex-direction: column;
	}

	.unlock-item {
		position: relative;
		display: flex;
		justify-content: flex-start;
		align-items: flex-start;
		flex-wrap: nowrap;

		.unlock-item-icon {
			position: relative;
			pointer-events: auto;
			width: pixels(30);
			height: pixels(30);
			margin-right: pixels(12);
			margin-bottom: pixels(12);
		}

		.unlock-item-icon-bg {
			position: absolute;
			pointer-events: none;
			width: 100%;
			height: 100%;
			fxs-background-image-tint: theme.color('primary-3');
			background-image: url("fs://game/core/ui/themes/default/img/Hex_64px.png");
			background-position: center;
			background-size: contain;
			background-repeat: no-repeat;
		}

		.unlock-item-icon-img {
			pointer-events: none;
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			filter: baseColors.$third-color-matrix;
			width: 100%;
			height: 100%;
		}
	}

	.unlock-item-content {
		display: flex;
		flex-direction: column;
		flex: 1 1 auto;
	}
}

.tech-tree-tooltip {
	@media (max-height: pixels(720)) {
		display: none;
	}

	&.tooltip {
		.tooltip__content {
			width: pixels(420);
		}
	}

	.tech-tree-tooltip__header-container {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	.tech-tree-tooltip__unlocks-container {
		display: flex;
		flex-direction: column;
	}

	.unlock-item {
		position: relative;
		display: flex;
		justify-content: flex-start;
		align-items: flex-start;
		flex-wrap: nowrap;

		.unlock-item-icon {
			position: relative;
			pointer-events: auto;
			width: pixels(30);
			height: pixels(30);
			margin-right: pixels(12);
			margin-bottom: pixels(12);
		}

		.unlock-item-icon-bg {
			position: absolute;
			pointer-events: none;
			width: 100%;
			height: 100%;
			fxs-background-image-tint: theme.color('primary-3');
			background-image: url("fs://game/core/ui/themes/default/img/Hex_64px.png");
			background-position: center;
			background-size: contain;
			background-repeat: no-repeat;
		}

		.unlock-item-icon-img {
			pointer-events: none;
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			filter: baseColors.$third-color-matrix;
			width: 100%;
			height: 100%;
		}
	}

	.unlock-item-content {
		display: flex;
		flex-direction: column;
		flex: 1 1 auto;
	}
}

.advanced-start-tooltip {
	&.tooltip {
		.tooltip__content {
			width: auto;
			max-width: pixels(371);
		}
	}
}