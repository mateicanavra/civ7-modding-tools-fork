# Domain Migration Map (Snapshot)

Purpose: Track which domain files are viable to migrate into op-module structure without forcing unresolved decisions.

Legend:
- [V] viable now (pure helpers/types; no adapter/context IO, no artifact/registry access, no legacy config reads).
- [B] blocked (touches adapter/context, artifacts/overlays, runtime config, or step orchestration).
- [N] re-export/aggregator (neutral).
- [M] mixed directory (contains both [V] and [B]).

Scope: Domain portion only (mods/mod-swooper-maps/src/domain).
Paths below are relative to `mods/mod-swooper-maps/src/domain`.

Tree:
```
. [M]
|-- ecology [M]
|   |-- ecology/biomes [M]
|   |   |-- ecology/biomes/nudges [B]
|   |   |   |-- ecology/biomes/nudges/corridor-bias.ts [B]
|   |   |   |-- ecology/biomes/nudges/corridor-edge-hints.ts [B]
|   |   |   |-- ecology/biomes/nudges/rift-shoulder.ts [B]
|   |   |   |-- ecology/biomes/nudges/river-valley.ts [B]
|   |   |   |-- ecology/biomes/nudges/tropical-coast.ts [B]
|   |   |   \-- ecology/biomes/nudges/tundra-restraint.ts [B]
|   |   |-- ecology/biomes/coastal.ts [B]
|   |   |-- ecology/biomes/globals.ts [B]
|   |   |-- ecology/biomes/index.ts [B]
|   |   \-- ecology/biomes/types.ts [V]
|   |-- ecology/features [M]
|   |   |-- ecology/features/density-tweaks.ts [B]
|   |   |-- ecology/features/index.ts [B]
|   |   |-- ecology/features/indices.ts [B]
|   |   |-- ecology/features/paradise-reefs.ts [B]
|   |   |-- ecology/features/place-feature.ts [B]
|   |   |-- ecology/features/shelf-reefs.ts [B]
|   |   |-- ecology/features/types.ts [V]
|   |   \-- ecology/features/volcanic-vegetation.ts [B]
|   \-- ecology/index.ts [N]
|-- foundation [V]
|   |-- foundation/constants.ts [V]
|   |-- foundation/index.ts [N]
|   |-- foundation/plate-seed.ts [V]
|   |-- foundation/plates.ts [V]
|   \-- foundation/types.ts [V]
|-- hydrology [B]
|   |-- hydrology/climate [B]
|   |   |-- hydrology/climate/refine [B]
|   |   |   |-- hydrology/climate/refine/hotspot-microclimates.ts [B]
|   |   |   |-- hydrology/climate/refine/index.ts [B]
|   |   |   |-- hydrology/climate/refine/orogeny-belts.ts [B]
|   |   |   |-- hydrology/climate/refine/orographic-shadow.ts [B]
|   |   |   |-- hydrology/climate/refine/rift-humidity.ts [B]
|   |   |   |-- hydrology/climate/refine/river-corridor.ts [B]
|   |   |   \-- hydrology/climate/refine/water-gradient.ts [B]
|   |   |-- hydrology/climate/swatches [B]
|   |   |   |-- hydrology/climate/swatches/chooser.ts [B]
|   |   |   |-- hydrology/climate/swatches/equatorial-rainbelt.ts [B]
|   |   |   |-- hydrology/climate/swatches/great-plains.ts [B]
|   |   |   |-- hydrology/climate/swatches/index.ts [B]
|   |   |   |-- hydrology/climate/swatches/macro-desert-belt.ts [B]
|   |   |   |-- hydrology/climate/swatches/monsoon-bias.ts [B]
|   |   |   |-- hydrology/climate/swatches/mountain-forests.ts [B]
|   |   |   |-- hydrology/climate/swatches/rainforest-archipelago.ts [B]
|   |   |   \-- hydrology/climate/swatches/types.ts [B]
|   |   |-- hydrology/climate/baseline.ts [B]
|   |   |-- hydrology/climate/distance-to-water.ts [B]
|   |   |-- hydrology/climate/index.ts [B]
|   |   |-- hydrology/climate/orographic-shadow.ts [B]
|   |   |-- hydrology/climate/runtime.ts [B]
|   |   \-- hydrology/climate/types.ts [B]
|   \-- hydrology/index.ts [N]
|-- morphology [M]
|   |-- morphology/coastlines [M]
|   |   |-- morphology/coastlines/adjacency.ts [V]
|   |   |-- morphology/coastlines/corridor-policy.ts [B]
|   |   |-- morphology/coastlines/index.ts [N]
|   |   |-- morphology/coastlines/plate-bias.ts [V]
|   |   |-- morphology/coastlines/rugged-coasts.ts [B]
|   |   \-- morphology/coastlines/types.ts [V]
|   |-- morphology/islands [M]
|   |   |-- morphology/islands/adjacency.ts [V]
|   |   |-- morphology/islands/fractal-threshold.ts [B]
|   |   |-- morphology/islands/index.ts [N]
|   |   |-- morphology/islands/placement.ts [B]
|   |   \-- morphology/islands/types.ts [V]
|   |-- morphology/landmass [M]
|   |   |-- morphology/landmass/ocean-separation [M]
|   |   |   |-- morphology/landmass/ocean-separation/apply.ts [B]
|   |   |   |-- morphology/landmass/ocean-separation/carve.ts [V]
|   |   |   |-- morphology/landmass/ocean-separation/fill.ts [V]
|   |   |   |-- morphology/landmass/ocean-separation/index.ts [N]
|   |   |   |-- morphology/landmass/ocean-separation/policy.ts [V]
|   |   |   |-- morphology/landmass/ocean-separation/row-state.ts [V]
|   |   |   \-- morphology/landmass/ocean-separation/types.ts [B]
|   |   |-- morphology/landmass/crust-first-landmask.ts [B]
|   |   |-- morphology/landmass/diagnostics.ts [B]
|   |   |-- morphology/landmass/index.ts [B]
|   |   |-- morphology/landmass/plate-stats.ts [V]
|   |   |-- morphology/landmass/post-adjustments.ts [V]
|   |   |-- morphology/landmass/terrain-apply.ts [B]
|   |   |-- morphology/landmass/types.ts [V]
|   |   |-- morphology/landmass/water-target.ts [V]
|   |   \-- morphology/landmass/windows.ts [V]
|   |-- morphology/mountains [M]
|   |   |-- morphology/mountains/apply.ts [B]
|   |   |-- morphology/mountains/index.ts [N]
|   |   |-- morphology/mountains/scoring.ts [B]
|   |   |-- morphology/mountains/selection.ts [B]
|   |   \-- morphology/mountains/types.ts [V]
|   |-- morphology/volcanoes [M]
|   |   |-- morphology/volcanoes/apply.ts [B]
|   |   |-- morphology/volcanoes/index.ts [N]
|   |   |-- morphology/volcanoes/scoring.ts [V]
|   |   |-- morphology/volcanoes/selection.ts [V]
|   |   \-- morphology/volcanoes/types.ts [V]
|   \-- morphology/index.ts [N]
|-- narrative [B]
|   |-- narrative/corridors [B]
|   |   |-- narrative/corridors/backfill.ts [B]
|   |   |-- narrative/corridors/index.ts [B]
|   |   |-- narrative/corridors/island-hop.ts [B]
|   |   |-- narrative/corridors/land-corridors.ts [B]
|   |   |-- narrative/corridors/river-chains.ts [B]
|   |   |-- narrative/corridors/runtime.ts [B]
|   |   |-- narrative/corridors/sea-lanes.ts [B]
|   |   |-- narrative/corridors/state.ts [B]
|   |   |-- narrative/corridors/style-cache.ts [B]
|   |   \-- narrative/corridors/types.ts [B]
|   |-- narrative/orogeny [B]
|   |   |-- narrative/orogeny/belts.ts [B]
|   |   |-- narrative/orogeny/cache.ts [B]
|   |   |-- narrative/orogeny/index.ts [N]
|   |   \-- narrative/orogeny/wind.ts [B]
|   |-- narrative/overlays [B]
|   |   |-- narrative/overlays/index.ts [N]
|   |   |-- narrative/overlays/keys.ts [B]
|   |   |-- narrative/overlays/normalize.ts [B]
|   |   \-- narrative/overlays/registry.ts [B]
|   |-- narrative/paleo [B]
|   |   |-- narrative/paleo/index.ts [N]
|   |   \-- narrative/paleo/rainfall-artifacts.ts [B]
|   |-- narrative/tagging [B]
|   |   |-- narrative/tagging/hotspots.ts [B]
|   |   |-- narrative/tagging/index.ts [N]
|   |   |-- narrative/tagging/margins.ts [B]
|   |   |-- narrative/tagging/rifts.ts [B]
|   |   \-- narrative/tagging/types.ts [B]
|   |-- narrative/utils [B]
|   |   |-- narrative/utils/adjacency.ts [B]
|   |   |-- narrative/utils/dims.ts [B]
|   |   |-- narrative/utils/latitude.ts [B]
|   |   |-- narrative/utils/rng.ts [B]
|   |   \-- narrative/utils/water.ts [B]
|   |-- narrative/artifacts.ts [B]
|   |-- narrative/index.ts [N]
|   |-- narrative/queries.ts [B]
|   \-- narrative/swatches.ts [B]
|-- placement [B]
|   |-- placement/advanced-start.ts [B]
|   |-- placement/areas.ts [B]
|   |-- placement/diagnostics.ts [B]
|   |-- placement/discoveries.ts [B]
|   |-- placement/fertility.ts [B]
|   |-- placement/floodplains.ts [B]
|   |-- placement/index.ts [B]
|   |-- placement/resources.ts [B]
|   |-- placement/snow.ts [B]
|   |-- placement/starts.ts [B]
|   |-- placement/terrain-validation.ts [B]
|   |-- placement/types.ts [B]
|   |-- placement/water-data.ts [B]
|   \-- placement/wonders.ts [B]
|-- artifacts.ts [N]
|-- index.ts [N]
\-- tags.ts [N]
```

Legend (V completed):
- [D] completed (was [V]); other markers unchanged from the legend above.

Tree (V completed):
```
. [M]
|-- ecology [M]
|   |-- ecology/biomes [M]
|   |   |-- ecology/biomes/nudges [B]
|   |   |   |-- ecology/biomes/nudges/corridor-bias.ts [B]
|   |   |   |-- ecology/biomes/nudges/corridor-edge-hints.ts [B]
|   |   |   |-- ecology/biomes/nudges/rift-shoulder.ts [B]
|   |   |   |-- ecology/biomes/nudges/river-valley.ts [B]
|   |   |   |-- ecology/biomes/nudges/tropical-coast.ts [B]
|   |   |   \-- ecology/biomes/nudges/tundra-restraint.ts [B]
|   |   |-- ecology/biomes/coastal.ts [B]
|   |   |-- ecology/biomes/globals.ts [B]
|   |   |-- ecology/biomes/index.ts [B]
|   |   \-- ecology/biomes/types.ts [D]
|   |-- ecology/features [M]
|   |   |-- ecology/features/density-tweaks.ts [B]
|   |   |-- ecology/features/index.ts [B]
|   |   |-- ecology/features/indices.ts [B]
|   |   |-- ecology/features/paradise-reefs.ts [B]
|   |   |-- ecology/features/place-feature.ts [B]
|   |   |-- ecology/features/shelf-reefs.ts [B]
|   |   |-- ecology/features/types.ts [D]
|   |   \-- ecology/features/volcanic-vegetation.ts [B]
|   \-- ecology/index.ts [N]
|-- foundation [D]
|   |-- foundation/constants.ts [D]
|   |-- foundation/index.ts [N]
|   |-- foundation/plate-seed.ts [D]
|   |-- foundation/plates.ts [D]
|   \-- foundation/types.ts [D]
|-- hydrology [B]
|   |-- hydrology/climate [B]
|   |   |-- hydrology/climate/refine [B]
|   |   |   |-- hydrology/climate/refine/hotspot-microclimates.ts [B]
|   |   |   |-- hydrology/climate/refine/index.ts [B]
|   |   |   |-- hydrology/climate/refine/orogeny-belts.ts [B]
|   |   |   |-- hydrology/climate/refine/orographic-shadow.ts [B]
|   |   |   |-- hydrology/climate/refine/rift-humidity.ts [B]
|   |   |   |-- hydrology/climate/refine/river-corridor.ts [B]
|   |   |   \-- hydrology/climate/refine/water-gradient.ts [B]
|   |   |-- hydrology/climate/swatches [B]
|   |   |   |-- hydrology/climate/swatches/chooser.ts [B]
|   |   |   |-- hydrology/climate/swatches/equatorial-rainbelt.ts [B]
|   |   |   |-- hydrology/climate/swatches/great-plains.ts [B]
|   |   |   |-- hydrology/climate/swatches/index.ts [B]
|   |   |   |-- hydrology/climate/swatches/macro-desert-belt.ts [B]
|   |   |   |-- hydrology/climate/swatches/monsoon-bias.ts [B]
|   |   |   |-- hydrology/climate/swatches/mountain-forests.ts [B]
|   |   |   |-- hydrology/climate/swatches/rainforest-archipelago.ts [B]
|   |   |   \-- hydrology/climate/swatches/types.ts [B]
|   |   |-- hydrology/climate/baseline.ts [B]
|   |   |-- hydrology/climate/distance-to-water.ts [B]
|   |   |-- hydrology/climate/index.ts [B]
|   |   |-- hydrology/climate/orographic-shadow.ts [B]
|   |   |-- hydrology/climate/runtime.ts [B]
|   |   \-- hydrology/climate/types.ts [B]
|   \-- hydrology/index.ts [N]
|-- morphology [M]
|   |-- morphology/coastlines [M]
|   |   |-- morphology/coastlines/adjacency.ts [D]
|   |   |-- morphology/coastlines/corridor-policy.ts [B]
|   |   |-- morphology/coastlines/index.ts [N]
|   |   |-- morphology/coastlines/plate-bias.ts [D]
|   |   |-- morphology/coastlines/rugged-coasts.ts [B]
|   |   \-- morphology/coastlines/types.ts [D]
|   |-- morphology/islands [M]
|   |   |-- morphology/islands/adjacency.ts [D]
|   |   |-- morphology/islands/fractal-threshold.ts [B]
|   |   |-- morphology/islands/index.ts [N]
|   |   |-- morphology/islands/placement.ts [B]
|   |   \-- morphology/islands/types.ts [D]
|   |-- morphology/landmass [M]
|   |   |-- morphology/landmass/ocean-separation [M]
|   |   |   |-- morphology/landmass/ocean-separation/apply.ts [B]
|   |   |   |-- morphology/landmass/ocean-separation/carve.ts [D]
|   |   |   |-- morphology/landmass/ocean-separation/fill.ts [D]
|   |   |   |-- morphology/landmass/ocean-separation/index.ts [N]
|   |   |   |-- morphology/landmass/ocean-separation/policy.ts [D]
|   |   |   |-- morphology/landmass/ocean-separation/row-state.ts [D]
|   |   |   \-- morphology/landmass/ocean-separation/types.ts [B]
|   |   |-- morphology/landmass/crust-first-landmask.ts [B]
|   |   |-- morphology/landmass/diagnostics.ts [B]
|   |   |-- morphology/landmass/index.ts [B]
|   |   |-- morphology/landmass/plate-stats.ts [D]
|   |   |-- morphology/landmass/post-adjustments.ts [D]
|   |   |-- morphology/landmass/terrain-apply.ts [B]
|   |   |-- morphology/landmass/types.ts [D]
|   |   |-- morphology/landmass/water-target.ts [D]
|   |   \-- morphology/landmass/windows.ts [D]
|   |-- morphology/mountains [M]
|   |   |-- morphology/mountains/apply.ts [B]
|   |   |-- morphology/mountains/index.ts [N]
|   |   |-- morphology/mountains/scoring.ts [B]
|   |   |-- morphology/mountains/selection.ts [B]
|   |   \-- morphology/mountains/types.ts [D]
|   |-- morphology/volcanoes [M]
|   |   |-- morphology/volcanoes/apply.ts [B]
|   |   |-- morphology/volcanoes/index.ts [N]
|   |   |-- morphology/volcanoes/scoring.ts [D]
|   |   |-- morphology/volcanoes/selection.ts [D]
|   |   \-- morphology/volcanoes/types.ts [D]
|   \-- morphology/index.ts [N]
|-- narrative [B]
|   |-- narrative/corridors [B]
|   |   |-- narrative/corridors/backfill.ts [B]
|   |   |-- narrative/corridors/index.ts [B]
|   |   |-- narrative/corridors/island-hop.ts [B]
|   |   |-- narrative/corridors/land-corridors.ts [B]
|   |   |-- narrative/corridors/river-chains.ts [B]
|   |   |-- narrative/corridors/runtime.ts [B]
|   |   |-- narrative/corridors/sea-lanes.ts [B]
|   |   |-- narrative/corridors/state.ts [B]
|   |   |-- narrative/corridors/style-cache.ts [B]
|   |   \-- narrative/corridors/types.ts [B]
|   |-- narrative/orogeny [B]
|   |   |-- narrative/orogeny/belts.ts [B]
|   |   |-- narrative/orogeny/cache.ts [B]
|   |   |-- narrative/orogeny/index.ts [N]
|   |   \-- narrative/orogeny/wind.ts [B]
|   |-- narrative/overlays [B]
|   |   |-- narrative/overlays/index.ts [N]
|   |   |-- narrative/overlays/keys.ts [B]
|   |   |-- narrative/overlays/normalize.ts [B]
|   |   \-- narrative/overlays/registry.ts [B]
|   |-- narrative/paleo [B]
|   |   |-- narrative/paleo/index.ts [N]
|   |   \-- narrative/paleo/rainfall-artifacts.ts [B]
|   |-- narrative/tagging [B]
|   |   |-- narrative/tagging/hotspots.ts [B]
|   |   |-- narrative/tagging/index.ts [N]
|   |   |-- narrative/tagging/margins.ts [B]
|   |   |-- narrative/tagging/rifts.ts [B]
|   |   \-- narrative/tagging/types.ts [B]
|   |-- narrative/utils [B]
|   |   |-- narrative/utils/adjacency.ts [B]
|   |   |-- narrative/utils/dims.ts [B]
|   |   |-- narrative/utils/latitude.ts [B]
|   |   |-- narrative/utils/rng.ts [B]
|   |   \-- narrative/utils/water.ts [B]
|   |-- narrative/artifacts.ts [B]
|   |-- narrative/index.ts [N]
|   |-- narrative/queries.ts [B]
|   \-- narrative/swatches.ts [B]
|-- placement [B]
|   |-- placement/advanced-start.ts [B]
|   |-- placement/areas.ts [B]
|   |-- placement/diagnostics.ts [B]
|   |-- placement/discoveries.ts [B]
|   |-- placement/fertility.ts [B]
|   |-- placement/floodplains.ts [B]
|   |-- placement/index.ts [B]
|   |-- placement/resources.ts [B]
|   |-- placement/snow.ts [B]
|   |-- placement/starts.ts [B]
|   |-- placement/terrain-validation.ts [B]
|   |-- placement/types.ts [B]
|   |-- placement/water-data.ts [B]
|   \-- placement/wonders.ts [B]
|-- artifacts.ts [N]
|-- index.ts [N]
\-- tags.ts [N]
```

Legend (V implemented target layout):
- [D] implemented (file moved or converted to ops/rules); other markers unchanged.

Tree (V implemented target layout):
```
. [M]
|-- ecology [N]
|   |-- ecology/biomes [M]
|   |   |-- ecology/biomes/nudges [B]
|   |   |   |-- ecology/biomes/nudges/corridor-bias.ts [B]
|   |   |   |-- ecology/biomes/nudges/corridor-edge-hints.ts [B]
|   |   |   |-- ecology/biomes/nudges/rift-shoulder.ts [B]
|   |   |   |-- ecology/biomes/nudges/river-valley.ts [B]
|   |   |   |-- ecology/biomes/nudges/tropical-coast.ts [B]
|   |   |   \-- ecology/biomes/nudges/tundra-restraint.ts [B]
|   |   |-- ecology/biomes/coastal.ts [B]
|   |   |-- ecology/biomes/globals.ts [B]
|   |   |-- ecology/biomes/index.ts [B]
|   |   \-- ecology/biomes/types.ts [D]
|   |-- ecology/features [M]
|   |   |-- ecology/features/density-tweaks.ts [B]
|   |   |-- ecology/features/index.ts [B]
|   |   |-- ecology/features/indices.ts [B]
|   |   |-- ecology/features/paradise-reefs.ts [B]
|   |   |-- ecology/features/place-feature.ts [B]
|   |   |-- ecology/features/shelf-reefs.ts [B]
|   |   |-- ecology/features/types.ts [D]
|   |   \-- ecology/features/volcanic-vegetation.ts [B]
|   \-- ecology/index.ts [N]
|-- foundation [D]
|   |-- foundation/ops [D]
|   |   \-- foundation/ops/compute-plates [D]
|   |       |-- foundation/ops/compute-plates/index.ts [D]
|   |       \-- foundation/ops/compute-plates/plate-seed.ts [D]
|   |-- foundation/constants.ts [D]
|   |-- foundation/index.ts [N]
|   \-- foundation/types.ts [D]
|-- hydrology [B]
|   |-- hydrology/climate [B]
|   |   |-- hydrology/climate/refine [B]
|   |   |   |-- hydrology/climate/refine/hotspot-microclimates.ts [B]
|   |   |   |-- hydrology/climate/refine/index.ts [B]
|   |   |   |-- hydrology/climate/refine/orogeny-belts.ts [B]
|   |   |   |-- hydrology/climate/refine/orographic-shadow.ts [B]
|   |   |   |-- hydrology/climate/refine/rift-humidity.ts [B]
|   |   |   |-- hydrology/climate/refine/river-corridor.ts [B]
|   |   |   \-- hydrology/climate/refine/water-gradient.ts [B]
|   |   |-- hydrology/climate/swatches [B]
|   |   |   |-- hydrology/climate/swatches/chooser.ts [B]
|   |   |   |-- hydrology/climate/swatches/equatorial-rainbelt.ts [B]
|   |   |   |-- hydrology/climate/swatches/great-plains.ts [B]
|   |   |   |-- hydrology/climate/swatches/index.ts [B]
|   |   |   |-- hydrology/climate/swatches/macro-desert-belt.ts [B]
|   |   |   |-- hydrology/climate/swatches/monsoon-bias.ts [B]
|   |   |   |-- hydrology/climate/swatches/mountain-forests.ts [B]
|   |   |   |-- hydrology/climate/swatches/rainforest-archipelago.ts [B]
|   |   |   \-- hydrology/climate/swatches/types.ts [B]
|   |   |-- hydrology/climate/baseline.ts [B]
|   |   |-- hydrology/climate/distance-to-water.ts [B]
|   |   |-- hydrology/climate/index.ts [B]
|   |   |-- hydrology/climate/orographic-shadow.ts [B]
|   |   |-- hydrology/climate/runtime.ts [B]
|   |   \-- hydrology/climate/types.ts [B]
|   \-- hydrology/index.ts [N]
|-- morphology [N]
|   |-- morphology/coastlines [M]
|   |   |-- morphology/coastlines/rules [D]
|   |   |   |-- morphology/coastlines/rules/adjacency.ts [D]
|   |   |   \-- morphology/coastlines/rules/plate-bias.ts [D]
|   |   |-- morphology/coastlines/corridor-policy.ts [B]
|   |   |-- morphology/coastlines/index.ts [N]
|   |   |-- morphology/coastlines/rugged-coasts.ts [B]
|   |   \-- morphology/coastlines/types.ts [D]
|   |-- morphology/islands [M]
|   |   |-- morphology/islands/rules [D]
|   |   |   \-- morphology/islands/rules/adjacency.ts [D]
|   |   |-- morphology/islands/fractal-threshold.ts [B]
|   |   |-- morphology/islands/index.ts [N]
|   |   |-- morphology/islands/placement.ts [B]
|   |   \-- morphology/islands/types.ts [D]
|   |-- morphology/landmass [M]
|   |   |-- morphology/landmass/ocean-separation [M]
|   |   |   |-- morphology/landmass/ocean-separation/rules [D]
|   |   |   |   |-- morphology/landmass/ocean-separation/rules/carve.ts [D]
|   |   |   |   |-- morphology/landmass/ocean-separation/rules/fill.ts [D]
|   |   |   |   |-- morphology/landmass/ocean-separation/rules/policy.ts [D]
|   |   |   |   \-- morphology/landmass/ocean-separation/rules/row-state.ts [D]
|   |   |   |-- morphology/landmass/ocean-separation/apply.ts [B]
|   |   |   |-- morphology/landmass/ocean-separation/index.ts [N]
|   |   |   \-- morphology/landmass/ocean-separation/types.ts [B]
|   |   |-- morphology/landmass/rules [D]
|   |   |   |-- morphology/landmass/rules/plate-stats.ts [D]
|   |   |   |-- morphology/landmass/rules/post-adjustments.ts [D]
|   |   |   |-- morphology/landmass/rules/water-target.ts [D]
|   |   |   \-- morphology/landmass/rules/windows.ts [D]
|   |   |-- morphology/landmass/crust-first-landmask.ts [B]
|   |   |-- morphology/landmass/diagnostics.ts [B]
|   |   |-- morphology/landmass/index.ts [B]
|   |   |-- morphology/landmass/terrain-apply.ts [B]
|   |   \-- morphology/landmass/types.ts [D]
|   |-- morphology/mountains [M]
|   |   |-- morphology/mountains/apply.ts [B]
|   |   |-- morphology/mountains/index.ts [N]
|   |   |-- morphology/mountains/scoring.ts [B]
|   |   |-- morphology/mountains/selection.ts [B]
|   |   \-- morphology/mountains/types.ts [D]
|   |-- morphology/volcanoes [M]
|   |   |-- morphology/volcanoes/rules [D]
|   |   |   |-- morphology/volcanoes/rules/scoring.ts [D]
|   |   |   \-- morphology/volcanoes/rules/selection.ts [D]
|   |   |-- morphology/volcanoes/apply.ts [B]
|   |   |-- morphology/volcanoes/index.ts [N]
|   |   \-- morphology/volcanoes/types.ts [D]
|   \-- morphology/index.ts [N]
|-- narrative [B]
|   |-- narrative/corridors [B]
|   |   |-- narrative/corridors/backfill.ts [B]
|   |   |-- narrative/corridors/index.ts [B]
|   |   |-- narrative/corridors/island-hop.ts [B]
|   |   |-- narrative/corridors/land-corridors.ts [B]
|   |   |-- narrative/corridors/river-chains.ts [B]
|   |   |-- narrative/corridors/runtime.ts [B]
|   |   |-- narrative/corridors/sea-lanes.ts [B]
|   |   |-- narrative/corridors/state.ts [B]
|   |   |-- narrative/corridors/style-cache.ts [B]
|   |   \-- narrative/corridors/types.ts [B]
|   |-- narrative/orogeny [B]
|   |   |-- narrative/orogeny/belts.ts [B]
|   |   |-- narrative/orogeny/cache.ts [B]
|   |   |-- narrative/orogeny/index.ts [N]
|   |   \-- narrative/orogeny/wind.ts [B]
|   |-- narrative/overlays [B]
|   |   |-- narrative/overlays/index.ts [N]
|   |   |-- narrative/overlays/keys.ts [B]
|   |   |-- narrative/overlays/normalize.ts [B]
|   |   \-- narrative/overlays/registry.ts [B]
|   |-- narrative/paleo [B]
|   |   |-- narrative/paleo/index.ts [N]
|   |   \-- narrative/paleo/rainfall-artifacts.ts [B]
|   |-- narrative/tagging [B]
|   |   |-- narrative/tagging/hotspots.ts [B]
|   |   |-- narrative/tagging/index.ts [N]
|   |   |-- narrative/tagging/margins.ts [B]
|   |   |-- narrative/tagging/rifts.ts [B]
|   |   \-- narrative/tagging/types.ts [B]
|   |-- narrative/utils [B]
|   |   |-- narrative/utils/adjacency.ts [B]
|   |   |-- narrative/utils/dims.ts [B]
|   |   |-- narrative/utils/latitude.ts [B]
|   |   |-- narrative/utils/rng.ts [B]
|   |   \-- narrative/utils/water.ts [B]
|   |-- narrative/artifacts.ts [B]
|   |-- narrative/index.ts [N]
|   |-- narrative/queries.ts [B]
|   \-- narrative/swatches.ts [B]
|-- placement [B]
|   |-- placement/advanced-start.ts [B]
|   |-- placement/areas.ts [B]
|   |-- placement/diagnostics.ts [B]
|   |-- placement/discoveries.ts [B]
|   |-- placement/fertility.ts [B]
|   |-- placement/floodplains.ts [B]
|   |-- placement/index.ts [B]
|   |-- placement/resources.ts [B]
|   |-- placement/snow.ts [B]
|   |-- placement/starts.ts [B]
|   |-- placement/terrain-validation.ts [B]
|   |-- placement/types.ts [B]
|   |-- placement/water-data.ts [B]
|   \-- placement/wonders.ts [B]
|-- artifacts.ts [N]
|-- index.ts [N]
\-- tags.ts [N]
```

Implementation plan (concise):
1) Create foundation op module: move `foundation/plates.ts` to `foundation/ops/compute-plates/index.ts` and `foundation/plate-seed.ts` to `foundation/ops/compute-plates/plate-seed.ts`; add a thin re-export shim (or update all imports) to keep `computePlatesVoronoi`/`PlateSeedManager` stable.
2) Move pure helpers into `rules/` folders for coastlines/islands/landmass/ocean-separation/volcanoes; update local imports (e.g., `morphology/coastlines/rugged-coasts.ts`, landmass `index.ts`, volcanoes `apply.ts`) to the new paths.
3) Update barrel exports to reflect new locations (e.g., `morphology/coastlines/index.ts`, `morphology/landmass/ocean-separation/index.ts`, `foundation/index.ts`) and keep any public API aliases needed by tests.
4) Update tests that import moved files (e.g., `mods/mod-swooper-maps/test/foundation/*.test.ts`) to the new paths or to the new op surface.
5) Run checks/builds/tests: `pnpm -C packages/mapgen-core check && pnpm -C packages/mapgen-core build`, `pnpm -C mods/mod-swooper-maps check && pnpm -C mods/mod-swooper-maps build && pnpm -C mods/mod-swooper-maps test`; run `pnpm -C mods/mod-swooper-maps deploy` if the Civ7 tooling is available.
